var myObj;document.addEventListener("DOMContentLoaded",function(){null!=localStorage.getItem("cart")&&(cart=JSON.parse(localStorage.getItem("cart"))),showMiniCart()});var maxNumber,minNumber,newArr,catalog,arrauxiliary=[],arr=[],startCoast=[],bidArray=[],xmlhttp=new XMLHttpRequest;if(xmlhttp.open("GET","goods.txt",!0),xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var e in myObj=JSON.parse(this.responseText))arr.push(myObj[e]);if(null!=localStorage.getItem("bidItem")){bidArray=JSON.parse(localStorage.getItem("bidItem"));for(var r=0;r<arr.length;r++)for(var t=0;t<bidArray.length;t++)arr[r].id==bidArray[t].id&&(arr[r]["start-coast"]=bidArray[t]["start-coast"])}showGoods(),newArr=arr.slice(0);for(r=0;r<arr.length;r++)startCoast.push(arr[r]["start-coast"]);maxNumber=Math.max.apply(null,startCoast),minNumber=Math.min.apply(null,startCoast)}},xmlhttp.send(),"/smartfony.html"==window.location.pathname){document.querySelector(".catalog-sort__list").addEventListener("change",function(){"price-desc"==this.value&&(arr.sort(function(e,r){return e["start-coast"]-r["start-coast"]}),showGoods()),"price-asc"==this.value&&(arr.sort(function(e,r){return r["start-coast"]-e["start-coast"]}),showGoods()),"recommend"==this.value&&(arr.sort(function(e,r){return r.recommend-e.recommend}),showGoods())});var priceMin=document.querySelector(".filter-price__min"),priceMax=document.querySelector(".filter-price__max");priceMin.addEventListener("change",function(){(this.value<minNumber||this.value>maxNumber)&&(this.value=minNumber)}),priceMax.addEventListener("change",function(){(this.value>maxNumber||this.value<minNumber)&&(this.value=maxNumber)}),document.querySelector(".filter-price__btn").addEventListener("click",function(){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);var r=priceMin.value,t=priceMax.value;if(""==t&&""==r||""==t)return!1;arr=arr.filter(function(e){return e["start-coast"]>=r&&e["start-coast"]<=t});for(var e=0;e<arr.length;e++)arrauxiliary.push(arr[e]);showGoods()}),document.querySelector(".filter-condition-new").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)"new"==newArr[e]["product condition"]&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return"not new"==e["product condition"]}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()}),document.querySelector(".filter-condition-notNew").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)"not new"==newArr[e]["product condition"]&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return"new"==e["product condition"]}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()}),document.querySelector(".filter-repair-ok").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)"ok"==newArr[e].repair&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return"ok"!=e.repair}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()}),document.querySelector(".filter-repair-faulty").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)"faulty"==newArr[e].repair&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return"faulty"!=e.repair}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()}),document.querySelector(".filter-diagonal-wide").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)6<newArr[e].diagonal&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return e.diagonal<6}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()}),document.querySelector(".filter-diagonal-middle").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)5<=newArr[e].diagonal&&newArr[e].diagonal<=6&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return e.diagonal<5&&6<e.diagonal}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()}),document.querySelector(".filter-diagonal-small").addEventListener("change",function(){if(this.checked){arr=0<arrauxiliary.length?arrauxiliary.slice(0):newArr.slice(0);for(var e=0;e<newArr.length;e++)newArr[e].diagonal<3&&arrauxiliary.push(newArr[e]);arr=arrauxiliary.slice(0),showGoods()}else arrauxiliary=arrauxiliary.filter(function(e){return 3<e.diagonal}),arr=0==arrauxiliary.length?newArr.slice(0):arrauxiliary.slice(0),showGoods()});for(var filterBtn=document.getElementsByClassName("catalog-filter__title"),i=0;i<filterBtn.length;i++)filterBtn[i].addEventListener("click",function(){this.classList.toggle("show"),this.nextElementSibling.classList.toggle("catalog-filter__block_hide")})}function showGoods(){goods="";for(var e=0;e<arr.length;e++)goods+='<div class = "product-cell">',goods+='<a class = "product-cell__picture" href = '+arr[e].href+'><img class = "product-img" src = "'+arr[e].image+'"></a>',goods+='<div class = "product-cell__time">До окончания аукциона: '+Math.floor((new Date(arr[e]["start sale"])-Date.now())/864e5)+" дн.</div>",goods+='<h4 class = "product-cell__title">'+arr[e].name+"</h4>",goods+='<div class = "product-cell__price">',goods+='<div class = "price-title">Текущая цена:</div>',goods+='<div class = "product-price" data-art = "'+arr[e].id+'">'+arr[e]["start-coast"]+" грн</div>",goods+="</div>",goods+='<div class = "product-cell__price">',goods+='<div class = "price-title">Купить сейчас:</div>',goods+='<div class = "product-price">'+arr[e].coast+" грн</div>",goods+="</div>",goods+='<div class = "product-cell__btn">',goods+='<div class = "product-btn-bid" data-art = "'+arr[e].id+'"><p class = product-btn-title>Сделать ставку</p></div>',goods+='<div class = "product-btn-buy" data-art = "'+arr[e].id+'"><p class = product-btn-title>Купить</p></div>',goods+="</div>",goods+="</div>";(catalog=document.querySelector(".catalog-products")).innerHTML=goods;var r=document.getElementsByClassName("product-btn-buy");for(e=0;e<r.length;e++)r[e].addEventListener("click",addToCart),r[e].addEventListener("click",showModalCart);var t=document.getElementsByClassName("product-btn-bid");for(e=0;e<t.length;e++)t[e].addEventListener("click",makeBid)}var cart={};function addToCart(){var e=this.getAttribute("data-art");null!=cart[e]?cart[e]++:cart[e]=1,localStorage.setItem("cart",JSON.stringify(cart)),showMiniCart(),showCart()}function showMiniCart(){var e=0;for(var r in cart)e++;document.querySelector(".count-goods").innerHTML=e}function showCart(){var e="",r=0;for(var t in cart)e+='<div class = "cart-info">',e+='<button class = "cart-info__delete" data-art = "'+t+'">X</button>',e+='<img src = "'+myObj[t].image+'" class = "cart-info__img">',e+='<div class = "cart-info__title">'+myObj[t].name+"</div>",e+='<div class = "cart-info__amount">',e+='<button class = "cart-amount-minus" data-art = "'+t+'">&ndash;</button>',e+='<input class = "cart-amount" type = "text" value = "'+cart[t]+'">',e+='<button class = "cart-amount-plus" data-art = "'+t+'">+</button>',e+="</div>",e+='<div class = "cart-info__price">',e+='<span class = "cart-sum">'+cart[t]*myObj[t].coast+"</span>",e+='<span class = "cart-currency">грн</span>',e+="</div>",e+="</div>",r+=cart[t]*myObj[t].coast;document.querySelector(".cart-popup__content").innerHTML=e,document.querySelector(".cart-total-sum").innerHTML=r;for(var a=document.getElementsByClassName("cart-amount-plus"),i=document.getElementsByClassName("cart-amount-minus"),n=document.getElementsByClassName("cart-info__delete"),l=0;l<a.length;l++)a[l].addEventListener("click",plusGoods);for(var o=0;o<i.length;o++)i[o].addEventListener("click",minusGoods);for(var c=0;c<n.length;c++)n[c].addEventListener("click",deleteGoods)}function plusGoods(){var e=this.getAttribute("data-art");cart[e]++,saveCartToLS(),showCart()}function minusGoods(){var e=this.getAttribute("data-art");1<cart[e]?cart[e]--:delete cart[e],saveCartToLS(),showCart(),showMiniCart()}function deleteGoods(){var e=this.getAttribute("data-art");delete cart[e],saveCartToLS(),showCart(),showMiniCart()}function saveCartToLS(){localStorage.setItem("cart",JSON.stringify(cart))}var headerCart=document.querySelector(".header-cart");function showModalCart(){var e=document.querySelector(".page__cart");function r(){return!(e.style.display="none")}e.style.display="block",document.querySelector(".cart-popup__close").addEventListener("click",r),document.querySelector(".overlay-modal").addEventListener("click",r),document.querySelector(".cart-popup").onclick=function(e){e.stopPropagation()},document.querySelector(".btn-continue").addEventListener("click",r),document.onkeydown=function(e){27==e.keyCode&&r()}}function makeBid(){var e={},r="",t=document.querySelector(".bid-block");t.style.display="block";var a=this.getAttribute("data-art");for(var i in e[a]=1,e)r+='<div class = "bid-info">',r+='<img src = "'+myObj[i].image+'" class = "bid-info__img">',r+='<div class = "bid-info__title">'+myObj[i].name+"</div>",r+="</div>",r+='<div class = "make-bid">',r+='<div class = "bid-current">',r+='<p class = "bid-current__title">Текущая цена</p>',r+='<div class = "bid-current__price">'+myObj[i]["start-coast"]+" грн</div>",r+="</div>",r+='<div class = "bid-offer">',r+='<p class = "bid-offer__title">Ставка</p>',r+='<input type = "number" class = "bid-offer__price">',r+="</div>",r+='<button class = "make-bid-btn">Сделать ставку</button>',r+="</div>";document.querySelector(".bid-popup__content").innerHTML=r;var n=document.querySelector(".bid-current__price"),l=document.querySelector(".bid-offer__price");function o(){return!(t.style.display="none")}l.value=parseInt(n.innerHTML)+20,document.querySelector(".make-bid-btn").addEventListener("click",function(){for(var e=l.value,r=0;r<arr.length;r++)arr[r].id==a&&(arr[r]["start-coast"]=e,n.innerHTML=e+" грн",bidArray.push(arr[r]),localStorage.setItem("bidItem",JSON.stringify(bidArray)));var t=document.getElementsByClassName("product-price");for(r=0;r<t.length;r++)t[r].getAttribute("data-art")==a&&(t[r].innerHTML=e+" грн")}),document.querySelector(".bid-popup__close").addEventListener("click",o),document.querySelector(".overlay-modal_bid").addEventListener("click",o),document.querySelector(".bid-popup").onclick=function(e){e.stopPropagation()},document.querySelector(".btn-continue_size").addEventListener("click",o),document.onkeydown=function(e){27==e.keyCode&&o()}}headerCart.addEventListener("click",showModalCart),headerCart.addEventListener("click",showCart);var htmlHeight=document.documentElement.scrollHeight;window.addEventListener("scroll",function(){150<document.documentElement.scrollTop&&800<htmlHeight?document.querySelector(".header__top").classList.add("fixed-line"):document.querySelector(".header__top").classList.remove("fixed-line")});var scrolled,timer,scrollBtn=document.querySelector(".scroll-top");window.addEventListener("scroll",function(){scrolled=document.documentElement.scrollTop,scrollBtn.style.display=100<scrolled?"block":"none"}),document.querySelector(".scroll-top").addEventListener("click",function e(){0<scrolled?(window.scrollBy(0,-140),timer=setTimeout(e,80)):clearTimeout(timer)});var searchOut=document.querySelector(".search-result");if(document.querySelector(".search-form__inner").onkeyup=function(){var e=searchOut.innerHTML="",r=this.value.replace(/(^\s+|\s+$)/g,""),t=new RegExp(r,"i");for(var a in myObj)-1!=myObj[a].name.search(t)&&(e+='<div class="search-result__list">'+myObj[a].name+"</div>");searchOut.innerHTML+=e,""==r&&(searchOut.innerHTML="")},"/new-offer.html"==window.location.pathname){var inputImg=document.querySelector(".img-load__file"),imgPreview=document.querySelector(".img-preview");inputImg.addEventListener("change",function(){var e=inputImg.files;if(0==e.length)(t=document.createElement("p")).textContent="Файл не выбран",imgPreview.appendChild(t),t.classList.add("img-preview__text");else for(var r=0;r<e.length;r++){var t,a=document.createElement("div");if((t=document.createElement("p")).classList.add("img-preview__text"),validFileType(e[r])){t.textContent="Имя файла "+e[r].name+", размер "+returnFileSize(e[r].size)+".";var i=document.createElement("img");i.style.backgroundImage="url("+window.URL.createObjectURL(e[r])+")",a.appendChild(i),i.classList.add("preview-picture"),i.insertAdjacentHTML("afterEnd","<span class = 'img-preview__delete'>x</span>"),a.appendChild(t)}else t.textContent="Не допустимый тип файла",a.appendChild(t);imgPreview.appendChild(a),a.classList.add("img-preview__item")}var n=document.getElementsByClassName("img-preview__delete");for(r=0;r<n.length;r++)n[r].addEventListener("click",function(){imgPreview.removeChild(this.parentNode)})});var fileTypes=["image/jpeg","image/pjpeg","image/png"];function validFileType(e){for(var r=0;r<fileTypes.length;r++)if(e.type===fileTypes[r])return!0;return!1}function returnFileSize(e){return e<1024?e+"bytes":1024<=e&&e<1048576?(e/1024).toFixed(1)+"KB":1048576<=e?(e/1048576).toFixed(1)+"MB":void 0}}if("/index.html"==window.location.pathname){var slideIndex=1,slideInterval=setInterval(plusSlide,9e3);function plusSlide(){moveSlide(slideIndex++)}function minusSlide(){moveSlide(slideIndex--)}function moveSlide(){var e=document.getElementsByClassName("slider__item"),r=e.length;slideIndex>e.length&&(slideIndex=1),slideIndex<1&&(slideIndex=e.length);for(var t=0;t<e.length;t++)e[t].style.display="none";e[r-slideIndex].style.display="block"}function showTabsContent(e){for(var r=0;r<tabBlock.length;r++)tabBlock[r].style.display="none";tabBlock[e].style.display="block"}document.querySelector(".next-slider").addEventListener("click",plusSlide),document.querySelector(".prev-slider").addEventListener("click",minusSlide);var galleryRow=document.getElementsByClassName("gallery-row__img"),galleryPreview=document.getElementsByClassName("modal-row__img"),galleryModal=document.querySelector(".gallery-modal"),galleryIndex=1;function galleryClose(){galleryModal.style.display="none"}function currentSlide(e){showSlides(galleryIndex=e+1)}function showSlides(e){var r=document.getElementsByClassName("modal-main__img");galleryIndex>r.length&&(galleryIndex=1),galleryIndex<1&&(galleryIndex=r.length);for(var t=0;t<r.length;t++)r[t].style.display="none";r[galleryIndex-1].style.display="block"}showSlides(galleryIndex),document.querySelector(".gallery-row").addEventListener("click",function(e){for(var r=0;r<=galleryRow.length;r++)e.target==galleryRow[r]&&(currentSlide(r),galleryModal.style.display="block")}),document.querySelector(".modal-row").onclick=function(e){for(var r=0;r<=galleryPreview.length;r++)e.target==galleryPreview[r]&&currentSlide(r)},document.onkeydown=function(e){27==e.keyCode&&galleryClose()},document.querySelector(".gallery-modal__close").onclick=galleryClose,document.querySelector(".modal-main__prev").onclick=function(){showSlides(galleryIndex--)},document.querySelector(".modal-main__next").onclick=function(){showSlides(galleryIndex++)}}
//# sourceMappingURL=main.js.map
